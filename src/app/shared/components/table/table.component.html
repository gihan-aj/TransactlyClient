@if (!loading() && data().length === 0) {
<div class="text-center p-3">
  <div class="contained">
    <h3 class="mb-2">No Data Available</h3>
    <p>
      The table currently has no data to display. Please check your filters,
      search terms or try again later.
    </p>
  </div>
</div>

} @else {
<table mat-table [dataSource]="dataSource()">
  @if (allowSelect()) {
  <ng-container matColumnDef="select">
    <th mat-header-cell *matHeaderCellDef>
      <mat-checkbox
        (change)="$event ? toggleAllRows() : null"
        [checked]="selection().hasValue() && isAllSelected()"
        [indeterminate]="selection().hasValue() && !isAllSelected()"
        [aria-label]="checkboxLabel()"
      >
      </mat-checkbox>
    </th>

    <td mat-cell *matCellDef="let row">
      <mat-checkbox
        (click)="$event.stopPropagation()"
        (change)="$event ? selection().toggle(row) : null"
        [checked]="selection().isSelected(row)"
        [aria-label]="checkboxLabel(row.id)"
      >
      </mat-checkbox>
    </td>
  </ng-container>
  } @if (enableActions()) {
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>

    <td mat-cell *matCellDef="let row">
      <button
        class="success-text"
        *ngIf="row.isActive"
        mat-icon-button
        aria-label="deactivate row"
        (click)="onDeactivate(row)"
        matTooltip="Deactivate"
      >
        <mat-icon>toggle_on</mat-icon>
      </button>
      <button
        class="danger-text"
        *ngIf="!row.isActive"
        mat-icon-button
        aria-label="activate row"
        (click)="onActivate(row)"
        matTooltip="Activate"
      >
        <mat-icon>toggle_off</mat-icon>
      </button>
      <button
        mat-icon-button
        aria-label="edit row"
        (click)="onEdit(row)"
        matTooltip="Edit"
      >
        <mat-icon class="info-text">edit</mat-icon>
      </button>
      <button
        class="danger-text"
        mat-icon-button
        aria-label="delete row"
        (click)="onDelete(row)"
        matTooltip="Delete"
      >
        <mat-icon>delete</mat-icon>
      </button>
    </td>
  </ng-container>
  } @for (column of columns(); track $index) {
  <ng-container matColumnDef="{{ column }}">
    <th mat-header-cell *matHeaderCellDef>
      {{ column | capitalizeFirstLetter }}
    </th>
    <td mat-cell *matCellDef="let item">{{ item[column] }}</td>
  </ng-container>
  }

  <tr mat-header-row *matHeaderRowDef="displayColumns()"></tr>
  <tr mat-row *matRowDef="let row; columns: displayColumns()"></tr>
</table>

@if (enableBulkActions()) {
<div class="row mt-2">
  <div
    class="col-12 d-flex flex-column flex-md-row justify-content-md-end gap-2"
  >
    <button
      [ngClass]="{ success: selection().selected.length > 0 }"
      [disabled]="selection().selected.length === 0"
      mat-flat-button
      (click)="onMultipleActivate()"
    >
      Activate
    </button>
    <button
      [ngClass]="{ warning: selection().selected.length > 0 }"
      [disabled]="selection().selected.length === 0"
      mat-flat-button
      (click)="onMultipleDeactivate()"
    >
      Deactivate
    </button>
    <button
      [ngClass]="{ danger: selection().selected.length > 0 }"
      [disabled]="selection().selected.length === 0"
      mat-flat-button
      (click)="onMultipleDelete()"
    >
      Delete
    </button>
  </div>
</div>
} }
